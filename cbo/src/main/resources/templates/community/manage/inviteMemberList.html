<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>멤버 초대</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fffafa; /* 연한 핑크 배경 */
      margin: 20px;
    }
    h3 {
      color: #d81b60; /* 연한 진핑크 텍스트 */
      margin-bottom: 15px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #ffffff;
      border: 1px solid #f8bbd0;
      border-radius: 6px;
      overflow: hidden;
    }
    th, td {
      border-bottom: 1px solid #f8bbd0;
      padding: 10px;
      text-align: center;
      font-size: 13px;
    }
    th {
      background: #fce4ec; /* 연핑크 헤더 */
      color: #880e4f; /* 진핑크 계열 글자 */
    }
    tr:hover {
      background: #fce4ec; /* 연핑크 hover */
    }
    button {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      background: #f8bbd0; /* 연핑크 버튼 */
      color: #880e4f; /* 진핑크 글자 */
    }
    button:hover {
      background: #f48fb1; /* 살짝 진한 연핑크 hover */
    }
    button:disabled {
      background: #f3e5f5; /* 매우 연한 보라핑크 */
      color: #aaa;
      cursor: not-allowed;
    }
    .status-badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      background: #f8bbd0; /* 연핑크 상태 */
      color: #880e4f;
    }
  </style>
</head>
<body>
  <h3>초대 가능한 멤버 목록</h3>
  <table>
    <thead>
      <tr>
        <th>이름</th>
        <th>직급</th>
        <th>부서</th>
        <th>상태</th>
        <th>선택</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="m : ${inviteList}"
          th:data-id="${m['ID']}"
          th:data-name="${m['NAME']}"
          th:data-grade="${m['GRADE_NAME'] != null ? m['GRADE_NAME'] : '직급없음'}">
        <td th:text="${m['NAME']}">이름</td>
        <td th:text="${m['GRADE_NAME'] != null ? m['GRADE_NAME'] : '직급없음'}">직급</td>
        <td th:text="${m['DEPT_NAME'] != null ? m['DEPT_NAME'] : '부서없음'}">부서</td>
        <td>
          <span th:if="${m['ROLE'] != null}" class="status-badge">이미 멤버</span>
          <span th:if="${m['ROLE'] == null}" class="status-badge">초대 가능</span>
        </td>
        <td>
          <button type="button"
                  th:disabled="${m['ROLE'] != null}"
                  onclick="selectMember(this)">+ 선택</button>
        </td>
      </tr>
    </tbody>
  </table>

  <script>
    function selectMember(button) {
      const tr = button.closest('tr');
      const id = tr.dataset.id;
      const name = tr.dataset.name;
      const grade = tr.dataset.grade;
      window.opener.addSelectedMember(id, name, grade);
      window.close();
    }
  </script>
</body>
</html>
